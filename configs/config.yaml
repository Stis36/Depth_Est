# Multi-View Stereo (MVS) Configuration File
# 複数ビューからの深度推定の設定ファイル

# 参照ビュー以外のビュー数（1-3の範囲）
# 例: num_views=3 の場合、参照ビュー(view0) + 3つのビュー = 合計4ビュー（view0~3）
# 注意: view0は常に参照ビュー（基準ビュー）として使用されます
num_views: 2

# 各ビューの設定（最大4つ: view0~3）
# 重要: view0は常に参照ビューとして使用されます
#       view1, view2, view3は、view0から見た相対姿勢を指定してください
views:
  # ビュー0（常に参照ビュー）
  - view_id: 0
    image_path: "path/to/view0.jpg"  # 画像パス
    intrinsic:
      focal_length: 7.18560000000e+02  # 焦点距離（ピクセル単位）
      cx: 6.0719280000000e+02  # 主点のX座標（ピクセル単位）
      cy: 1.8521570000000e+02  # 主点のY座標（ピクセル単位）
    distortion:
      # 歪み係数 [k1, k2, p1, p2, k3]
      k1: 0.0
      k2: 0.0
      p1: 0.0
      p2: 0.0
      k3: 0.0

  # ビュー1（view0から見た相対姿勢を指定）
  # 重要: このビューのextrinsicは、view0から見た相対姿勢です
  - view_id: 1
    image_path: "path/to/view1.jpg"
    intrinsic:
      focal_length: 7.18560000000e+02
      cx: 6.0719280000000e+02
      cy: 1.8521570000000e+02
    distortion:
      k1: 0.0
      k2: 0.0
      p1: 0.0
      p2: 0.0
      k3: 0.0  
    extrinsic:
      # 参照ビューから見た相対姿勢（参照ビューがview0の場合、view0から見たview1の位置・姿勢）
      rotation:
        type: "euler"  # "matrix" または "euler"
        roll: 0.0   # ロール角（ラジアン）
        pitch: 0.0  # ピッチ角（ラジアン）
        yaw: 0.0    # ヨー角（ラジアン）
        # 行列で与える場合の例
        # rotation:
        #   type: "matrix"
        #   matrix:
        #     - [1.0, 0.0, 0.0]
        #     - [0.0, 1.0, 0.0]
        #     - [0.0, 0.0, 1.0]
      translation:
        x: 0.10  # X方向の並進（ベースライン、10cm）
        y: 0.0   # Y方向の並進
        z: 0.0   # Z方向の並進

  # ビュー2（オプション、num_views >= 3の場合）
  # 重要: view1と同様に、view0から見た相対姿勢を指定します
  - view_id: 2
    image_path: "path/to/view2.jpg"
    intrinsic:
      focal_length: 7.18560000000e+02
      cx: 6.0719280000000e+02
      cy: 1.8521570000000e+02
    distortion:
      k1: 0.0
      k2: 0.0
      p1: 0.0
      p2: 0.0
      k3: 0.0
    extrinsic:
      # view0から見た相対姿勢
      rotation:
        type: "euler"  # "matrix" または "euler"
        roll: 0.0   # ロール角（ラジアン）
        pitch: 0.0  # ピッチ角（ラジアン）
        yaw: 0.0    # ヨー角（ラジアン）
      translation:
        x: 0.0
        y: 0.10  # Y方向の並進（10cm）
        z: 0.0

  # ビュー3（オプション、num_views >= 3の場合）
  # 重要: view1, view2と同様に、view0から見た相対姿勢を指定します
  - view_id: 3
    image_path: "path/to/view3.jpg"
    intrinsic:
      focal_length: 7.18560000000e+02
      cx: 6.0719280000000e+02
      cy: 1.8521570000000e+02
    distortion:
      k1: 0.0
      k2: 0.0
      p1: 0.0
      p2: 0.0
      k3: 0.0
    extrinsic:
      # view0から見た相対姿勢
      rotation:
        type: "euler"  # "matrix" または "euler"
        roll: 0.0   # ロール角（ラジアン）
        pitch: 0.0  # ピッチ角（ラジアン）
        yaw: 0.0    # ヨー角（ラジアン）
      translation:
        x: -0.10  # X方向の並進（-10cm）
        y: 0.0
        z: 0.0

# MVS深度推定の設定（PatchMatch法）
mvs:
  depth_range:
    min_depth: 0.1   # 最小深度（メートル）
    max_depth: 10.0  # 最大深度（メートル）
  
  patch_radius: 3     # NCC計算のパッチ半径
  iters: 3            # PatchMatchの反復回数（多いほど精度が上がるが計算時間が増える）

# 出力設定
output:
  save_results: true  # 結果を保存するかどうか
  output_dir: "./result"  # 出力ディレクトリ
  show_images: true  # 結果を表示するかどうか
  save_depth: true  # 深度マップを保存するかどうか
